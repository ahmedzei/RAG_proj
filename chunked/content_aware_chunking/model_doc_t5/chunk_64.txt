The code example below illustrates all of this.